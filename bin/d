#!/bin/bash

set -euo pipefail

if [[ $# -lt 1 ]]; then
  echo "error: must pass some args" >&2
  exit 1
fi

if [[ -t 1 ]]; then
  content=$(colordiff -ur "$@")
  if [[ -n "$content" ]]; then
    printf '%s' "$content" | diff-highlight | less
  fi
else
  diff -ur "$@"
fi
