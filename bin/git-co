#!/bin/bash

set -euo pipefail

args=()
for arg in "$@"
do
  if [[ "$arg" == *:* ]]; then
    branch="${arg#*:}"
    args+=("$branch")
  else
    args+=("$arg")
  fi
done

if [[ -n "${branch:-}" ]]; then
  if (! git show-ref --quiet "$branch") && git remote get-url mine 2>/dev/null; then
    git fetch mine
  fi
fi

git checkout "${args[@]}"
